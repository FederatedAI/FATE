# Overview

A complete Pulsar cluster is composed of Pulsar broker, necessary ZooKeeper and BookKeeper services. The specific deployment methods can be divided into two types, they are:

1. **Standalone**, all services are started on one host, easy to deploy, suitable for local development and testing, and can also be used in some production environments.

2. **Cluster**, the service is scattered on different hosts, the deployment is slightly complicated, but it has the characteristics of high availability, load balancing, etc. It is suitable for the production environment.

## 1. Prerequisite

1. Java 8
2. Linux operating system

## 2. Download the Pulsar 2.7.0 installation package

Download from Pulsar official website [download page](https://pulsar.apache.org/download/)

or

Use the `wget` command to download:

``` bash
$ wget https://archive.apache.org/dist/pulsar/pulsar-2.7.0/apache-pulsar-2.7.0-bin.tar.gz
```

After downloading the compressed file, unzip it to **"/data/projects/common"** and use the `cd` command to enter the target directory:

``` bash
$ tar -C /data/projects/common -xvfz apache-pulsar-2.7.0-bin.tar.gz
$ cd /data/projects/common/apache-pulsar-2.7.0
```

## 3. Start the Standalone Pulsar Service

1. Edit the "conf/standalone.conf" file and modify it as follows:

``` bash
# Modify the function of automatically deleting topics
brokerDeleteInactiveTopicsEnabled=true

# Modify the frame size of bookkie to 128MB, the default size is 5MB
nettyMaxFrameSizeBytes=134217728

# Modify the size of the pulsar message capacity to 128MB, the default is 5MB
maxMessageSize=134217728
```

2. Start the pulsar service

``` bash
$ bin/pulsar standalone -nss 2>&1 > logs/standalone.log &
```

The above command will export the pulsar log to the "logs/standalone.log" file.

3. Stop the pulsar cluster

When the pulsar cluster is no longer needed, the following command can be used to stop it.

``` bash
$ kill $(ps -aux | grep pulsar | grep -v "grep" | awk'{print $2}')
```

When the data generated by the pulsar service is no longer used, the user can remove "apache-pulsar-2.7.0/data" directory.

For more information about the configuration of the standalone version of Pulsar, please refer to the official Pulsar document [Set up a standalone Pulsar locally](https://pulsar.apache.org/docs/en/standalone/)

## 4. Start the cluster version of Pulsar cluster

For Pulsar service deployment in cluster mode, please refer to the official document [Deploying a multi-cluster on bare metal](https://pulsar.apache.org/docs/en/deploy-bare-metal-multi-cluster), Among them, [Deployment Configuration store](https://pulsar.apache.org/docs/en/deploy-bare-metal-multi-cluster/#deploy-the-configuration-store) can be skipped.
